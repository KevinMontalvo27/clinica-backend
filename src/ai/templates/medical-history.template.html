<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial M茅dico - {{PATIENT_NAME}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            font-size: 11pt;
            line-height: 1.6;
            color: #2c3e50;
            background: white;
        }

        .page {
            padding: 30px 50px;
            max-width: 210mm;
            margin: 0 auto;
        }

        /* ============ HEADER ============ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2980b9;
        }

        .header .logo {
            font-size: 28pt;
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 5px;
        }

        .header .clinic-name {
            font-size: 14pt;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .header .document-title {
            font-size: 20pt;
            font-weight: bold;
            color: #34495e;
            margin: 15px 0 10px 0;
        }

        .header .metadata {
            font-size: 10pt;
            color: #95a5a6;
            margin-top: 10px;
        }

        .header .metadata table {
            margin: 10px auto;
            border: none;
        }

        .header .metadata td {
            padding: 5px 15px;
            border: none;
            text-align: left;
        }

        .header .metadata .label {
            font-weight: bold;
            color: #34495e;
        }

        /* ============ CONTENT ============ */
        .content {
            margin-top: 20px;
            text-align: justify;
        }

        /* Headings */
        .content h1 {
            color: #2980b9;
            font-size: 18pt;
            margin-top: 25px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3498db;
        }

        .content h2 {
            color: #34495e;
            font-size: 15pt;
            margin-top: 20px;
            margin-bottom: 12px;
            padding-left: 10px;
            border-left: 4px solid #3498db;
        }

        .content h3 {
            color: #34495e;
            font-size: 13pt;
            margin-top: 15px;
            margin-bottom: 10px;
        }

        .content h4, .content h5, .content h6 {
            color: #34495e;
            font-size: 12pt;
            margin-top: 12px;
            margin-bottom: 8px;
        }

        /* Paragraphs */
        .content p {
            margin-bottom: 12px;
            text-align: justify;
            line-height: 1.7;
        }

        .content strong {
            color: #2c3e50;
            font-weight: 700;
        }

        .content em {
            font-style: italic;
            color: #555;
        }

        /* Lists */
        .content ul, .content ol {
            margin-left: 30px;
            margin-bottom: 15px;
            margin-top: 10px;
        }

        .content li {
            margin-bottom: 6px;
            line-height: 1.6;
        }

        .content ul li {
            list-style-type: disc;
        }

        .content ol li {
            list-style-type: decimal;
        }

        /* Tables */
        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 10pt;
        }

        .content th, .content td {
            border: 1px solid #bdc3c7;
            padding: 10px 12px;
            text-align: left;
        }

        .content th {
            background-color: #3498db;
            color: white;
            font-weight: 600;
        }

        .content tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .content tr:hover {
            background-color: #ecf0f1;
        }

        /* Blockquotes */
        .content blockquote {
            border-left: 5px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
            font-style: italic;
            color: #555;
        }

        /* Code blocks */
        .content pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 9pt;
        }

        .content code {
            background-color: #ecf0f1;
            color: #e74c3c;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 10pt;
        }

        .content pre code {
            background-color: transparent;
            color: #ecf0f1;
            padding: 0;
        }

        /* Horizontal rules */
        .content hr {
            border: none;
            border-top: 2px solid #ecf0f1;
            margin: 25px 0;
        }

        /* ============ SPECIAL SECTIONS ============ */
        
        /* Warning/Alert boxes */
        .warning-box {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .danger-box {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box {
            background-color: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background-color: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        /* Highlight critical information */
        .content h2:contains("IMPORTANTE"),
        .content h2:contains("ALERGIAS"),
        .content h2:contains("CRTICA"),
        .content h2:contains("SEGURIDAD") {
            background-color: #f8d7da;
            color: #dc3545;
            padding: 12px;
            border-left: 5px solid #dc3545;
        }

        /* ============ FOOTER ============ */
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
            font-size: 9pt;
            color: #7f8c8d;
        }

        .footer .confidential {
            text-align: center;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .footer .legal {
            text-align: center;
            line-height: 1.4;
            margin-top: 10px;
        }

        .footer .signatures {
            margin-top: 40px;
            display: flex;
            justify-content: space-around;
        }

        .footer .signature-box {
            text-align: center;
            width: 200px;
        }

        .footer .signature-line {
            border-top: 1px solid #000;
            margin-top: 50px;
            padding-top: 5px;
        }

        /* ============ PRINT STYLES ============ */
        @media print {
            body {
                margin: 0;
                padding: 0;
            }

            .page {
                padding: 20px 30px;
            }

            .header {
                margin-bottom: 20px;
                padding-bottom: 15px;
            }

            .footer {
                page-break-inside: avoid;
            }

            /* Prevent page breaks inside important sections */
            .content h2,
            .content h3,
            .content table,
            .warning-box,
            .danger-box {
                page-break-inside: avoid;
            }
        }

        /* ============ PAGE BREAKS ============ */
        .page-break {
            page-break-after: always;
        }

        .avoid-break {
            page-break-inside: avoid;
        }
    </style>
</head>
<body>
    <div class="page">
        <!-- HEADER -->
        <div class="header">
            <div class="logo"></div>
            <div class="clinic-name">{{CLINIC_NAME}}</div>
            <div class="document-title">HISTORIAL MDICO</div>
            <div class="metadata">
                <table>
                    <tr>
                        <td class="label">Paciente:</td>
                        <td>{{PATIENT_NAME}}</td>
                    </tr>
                    <tr>
                        <td class="label">Fecha de generaci贸n:</td>
                        <td>{{GENERATED_DATE}}</td>
                    </tr>
                    <tr>
                        <td class="label">Generado por:</td>
                        <td>{{GENERATED_BY}}</td>
                    </tr>
                    <tr>
                        <td class="label">ID de documento:</td>
                        <td>{{DOCUMENT_ID}}</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- CONTENT (Aqu铆 se inyecta el HTML del markdown) -->
        <div class="content">
            {{CONTENT}}
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <div class="confidential">
                DOCUMENTO CONFIDENCIAL 
            </div>
            <div class="legal">
                Este documento contiene informaci贸n m茅dica confidencial protegida por la ley.<br>
                Queda estrictamente prohibida su reproducci贸n, distribuci贸n o uso no autorizado.<br>
                Generado autom谩ticamente por el Sistema de Gesti贸n M茅dica el {{GENERATED_DATE}}
            </div>
            
            <!-- Opcional: Espacio para firmas -->
            <!-- 
            <div class="signatures">
                <div class="signature-box">
                    <div class="signature-line">Firma del M茅dico</div>
                </div>
                <div class="signature-box">
                    <div class="signature-line">Firma del Paciente</div>
                </div>
            </div>
            -->
        </div>
    </div>
</body>
</html>